<h1>Crop Area of Interest</h1>
<%= form_for @collection_template, method: :put, url: wizard_path do |f| %>
  <% if f.object.errors.any? %>
    <div class="error_messages">
      <% f.object.errors.full_messages.each do |error| %>
        <p><%= error %></p>
      <% end %>
    </div>
  <% end %>
  <div id="osdCanvas" style="width:400px; height:400px;"></div>
  <div class="form-group">
    <%= f.text_field :crop_bounds %>
  </div>
  <%= f.submit 'Next Step', class: 'btn btn-primary' %>
<% end %>
<script>
 var imageId = (function() {
   var baseName = '<%= @collection_template.image.file_name %>';
   return baseName.slice(0, -4); // slices off ".jpg". Should replace with accessor in model/controller.
 })();

 imageURL = '/image-service/' + imageId + '/info.json'; // should replace with dynamic path fed by model accessor.
 region = <%= @collection_template.crop_bounds %>

</script>
<%= javascript_include_tag "crop_image/crop_image" %>
